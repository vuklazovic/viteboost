<!DOCTYPE html>
<html>
<head>
    <title>Test Email Callback</title>
</head>
<body>
    <h1>Email Callback Test</h1>
    <p>This page simulates what happens when a user clicks an email confirmation link.</p>
    
    <div id="results"></div>
    
    <script>
        // Simulate the URL fragment that Supabase would add after email verification
        const testFragment = '#access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.test&refresh_token=test_refresh&expires_in=3600&token_type=bearer';
        
        // Parse tokens like our AuthContext does
        const params = new URLSearchParams(testFragment.substring(1));
        const accessToken = params.get('access_token');
        const refreshToken = params.get('refresh_token');
        const expiresIn = params.get('expires_in');
        
        const results = document.getElementById('results');
        results.innerHTML = `
            <h2>Parsed Tokens:</h2>
            <p><strong>Access Token:</strong> ${accessToken ? 'present' : 'missing'}</p>
            <p><strong>Refresh Token:</strong> ${refreshToken ? 'present' : 'missing'}</p>
            <p><strong>Expires In:</strong> ${expiresIn}</p>
            <p><strong>Current URL:</strong> ${window.location.href}</p>
        `;
        
        console.log('Test tokens extracted:', {
            accessToken: accessToken ? 'present' : 'missing',
            refreshToken: refreshToken ? 'present' : 'missing',
            expiresIn
        });
    </script>
</body>
</html>